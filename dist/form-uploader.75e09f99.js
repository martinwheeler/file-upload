parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"cl7N":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(t,n){"function"==typeof e&&e.amd?e(function(){return n(t)}):"object"===("undefined"==typeof module?"undefined":s(module))&&module.exports?module.exports=n(t):t.ss=n(t)}("undefined"!=typeof window?window:this,function(e){var t,n=e.ss||{},i=/^\s+/,o=/\s+$/,r=/[xy]/g,a=/.*(\/|\\)/,u=/.*[.]/,l=/[\t\r\n]/g,d=Object.prototype.toString.call(e.HTMLElement).indexOf("Constructor")>0,c=-1!==navigator.userAgent.indexOf("MSIE")&&-1===navigator.userAgent.indexOf("MSIE 1"),p=-1!==navigator.userAgent.indexOf("MSIE 7"),h=document.createElement("input");h.type="file",t="multiple"in h&&"undefined"!=typeof File&&void 0!==(new XMLHttpRequest).upload,n.obj2string=function(e,t){"use strict";var i=[];for(var o in e)if(e.hasOwnProperty(o)){var r=t?t+"["+o+"]":o,a=e[o];i.push("object"===s(a)?n.obj2string(a,r):encodeURIComponent(r)+"="+encodeURIComponent(a))}return i.join("&")},n.extendObj=function(e,t){"use strict";for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])},n.addEvent=function(e,t,s){"use strict";return e.addEventListener?e.addEventListener(t,s,!1):e.attachEvent("on"+t,s),function(){n.removeEvent(e,t,s)}},n.removeEvent=document.removeEventListener?function(e,t,s){e.removeEventListener&&e.removeEventListener(t,s,!1)}:function(e,t,s){var n="on"+t;void 0===e[n]&&(e[n]=null),e.detachEvent(n,s)},n.newXHR=function(){"use strict";if("undefined"!=typeof XMLHttpRequest)return new e.XMLHttpRequest;if(e.ActiveXObject)try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){return!1}},n.encodeUTF8=function(e){"use strict";return unescape(encodeURIComponent(e))},n.getIFrame=function(){"use strict";var e,t=n.getUID();return p?e=document.createElement('<iframe src="javascript:false;" name="'+t+'">'):((e=document.createElement("iframe")).src="javascript:false;",e.name=t),e.style.display="none",e.id=t,e},n.getForm=function(e){"use strict";var t=document.createElement("form");for(var s in t.encoding="multipart/form-data",t.enctype="multipart/form-data",t.style.display="none",e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t},n.getHidden=function(e,t){"use strict";var s=document.createElement("input");return s.type="hidden",s.name=e,s.value=t,s},n.parseJSON=function(t){"use strict";if(!t)return!1;if(t=n.trim(t+""),e.JSON&&e.JSON.parse)try{return e.JSON.parse(t+"")}catch(o){return!1}var s,i=null;return!(!t||n.trim(t.replace(/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g,function(e,t,n,o){return s&&t&&(i=0),0===i?e:(s=n||t,i+=!o-!n,"")})))&&Function("return "+t)()},n.getBox=function(t){"use strict";var s,n,i=0,o=0;if(t.getBoundingClientRect)s=t.getBoundingClientRect(),n=document.documentElement,i=s.top+(e.pageYOffset||n.scrollTop)-(n.clientTop||0),o=s.left+(e.pageXOffset||n.scrollLeft)-(n.clientLeft||0);else do{o+=t.offsetLeft,i+=t.offsetTop}while(t=t.offsetParent);return{top:Math.round(i),left:Math.round(o)}},n.addStyles=function(e,t){"use strict";for(var s in t)t.hasOwnProperty(s)&&(e.style[s]=t[s])},n.copyLayout=function(e,t){"use strict";var s=n.getBox(e);n.addStyles(t,{position:"absolute",left:s.left+"px",top:s.top+"px",width:e.offsetWidth+"px",height:e.offsetHeight+"px"})},n.getUID=function(){"use strict";return"axxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(r,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})};var f="".trim;n.trim=f&&!f.call("\ufeffÂ ")?function(e){return null===e?"":f.call(e)}:function(e){return null===e?"":e.toString().replace(i,"").replace(o,"")};return n.indexOf=[].indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var s=0,n=e.length;s<n;s++)if(e[s]===t)return s;return-1},n.arrayDelete=function(e,t){var s=n.indexOf(e,t);s>-1&&e.splice(s,1)},n.getFilename=function(e){"use strict";return e.replace(a,"")},n.getExt=function(e){"use strict";return-1!==e.indexOf(".")?e.replace(u,""):""},n.isVisible=function(e){"use strict";return!!e&&(1!==e.nodeType||e==document.body?(e=null,!0):e.parentNode&&(e.offsetWidth>0||e.offsetHeight>0||"none"!=n.getStyle(e,"display").toLowerCase())?n.isVisible(e.parentNode):(e=null,!1))},n.getStyle=function(t,s){"use strict";return e.getComputedStyle?t.ownerDocument.defaultView.getComputedStyle(t,null).getPropertyValue(s):t.currentStyle&&t.currentStyle[s]?t.currentStyle[s]:void 0},n.getFormObj=function(e){"use strict";for(var t,s=e.elements,i=["button","submit","image","reset"],o={},r=0,a=s.length;r<a;r++)if(t={},s[r].name&&!s[r].disabled&&-1===n.indexOf(i,s[r].type)){if(("checkbox"==s[r].type||"radio"==s[r].type)&&!s[r].checked)continue;t[s[r].name]=n.val(s[r]),n.extendObj(o,t)}return o},n.val=function(e){"use strict";if(e){if("SELECT"==e.nodeName.toUpperCase()){for(var t,s=e.options,n=e.selectedIndex,i="select-one"===e.type||n<0,o=i?null:[],r=0,a=s.length;r<a;r++)if((s[r].selected||r===n)&&!s[r].disabled){if(t=s[r].value?s[r].value:s[r].text,i)return t;o.push(t)}return o}return e.value}},n.hasClass=function(e,t){"use strict";return!(!e||!t)&&(" "+e.className+" ").replace(l," ").indexOf(" "+t+" ")>=0},n.addClass=function(e,t){"use strict";if(!e||!t)return!1;n.hasClass(e,t)||(e.className+=" "+t)},n.removeClass=function(){"use strict";var e={};return function(t,s){if(!t||!s)return!1;e[s]||(e[s]=new RegExp("(?:^|\\s)"+s+"(?!\\S)")),t.className=t.className.replace(e[s],"")}}(),n.purge=function(e){"use strict";var t,s,i,o=e.attributes;if(o)for(t=o.length-1;t>=0;t-=1)"function"==typeof e[i=o[t].name]&&(e[i]=null);if(o=e.childNodes)for(s=o.length,t=0;t<s;t+=1)n.purge(e.childNodes[t])},n.remove=function(e){"use strict";e&&e.parentNode&&(n.purge(e),e.parentNode.removeChild(e)),e=null},n.verifyElem=function(t){"use strict";return"undefined"!=typeof jQuery&&t instanceof jQuery?t=t[0]:"string"==typeof t&&("#"==t.charAt(0)&&(t=t.substr(1)),t=document.getElementById(t)),!(!t||1!==t.nodeType)&&("A"==t.nodeName.toUpperCase()&&(t.style.cursor="pointer",n.addEvent(t,"click",function(t){t&&t.preventDefault?t.preventDefault():e.event&&(e.event.returnValue=!1)})),t)},n._options={},n.uploadSetup=function(e){"use strict";n.extendObj(n._options,e)},n.SimpleUpload=function(e){"use strict";if(this._opts={button:"",url:"",dropzone:"",dragClass:"",form:"",overrideSubmit:!0,cors:!1,withCredentials:!1,progressUrl:!1,sessionProgressUrl:!1,nginxProgressUrl:!1,multiple:!1,multipleSelect:!1,maxUploads:3,queue:!0,checkProgressInterval:500,keyParamName:"APC_UPLOAD_PROGRESS",sessionProgressName:"PHP_SESSION_UPLOAD_PROGRESS",nginxProgressHeader:"X-Progress-ID",customProgressHeaders:{},corsInputName:"XHR_CORS_TARGETORIGIN",allowedExtensions:[],accept:"",maxSize:!1,name:"",data:{},noParams:!0,autoSubmit:!0,multipart:!0,method:"POST",responseType:"",debug:!1,hoverClass:"",focusClass:"",disabledClass:"",customHeaders:{},encodeHeaders:!0,autoCalibrate:!0,onBlankSubmit:function(){},onAbort:function(e,t,s){},onChange:function(e,t,s,n,i){},onSubmit:function(e,t,s,n){},onProgress:function(e){},onUpdateFileSize:function(e){},onComplete:function(e,t,s,n){},onDone:function(e,t,s,n,i,o){},onAllDone:function(){},onExtError:function(e,t){},onSizeError:function(e,t,s){},onError:function(e,t,s,n,i,o,r){},startXHR:function(e,t,s){},endXHR:function(e,t,s){},startNonXHR:function(e,t){},endNonXHR:function(e,t){}},n.extendObj(this._opts,n._options),n.extendObj(this._opts,e),this._queue=[],this._active=0,this._disabled=!1,this._maxFails=10,this._progKeys={},this._sizeFlags={},this._btns=[],this.addButton(this._opts.button),delete this._opts.button,this._opts.button=e=null,!1===this._opts.multiple&&(this._opts.maxUploads=1),""!==this._opts.dropzone&&this.addDZ(this._opts.dropzone),""===this._opts.dropzone&&this._btns.length<1)throw new Error("Invalid upload button. Make sure the element you're passing exists.");""!==this._opts.form&&this.setForm(this._opts.form),this._createInput(),this._manDisabled=!1,this.enable(!0)},n.SimpleUpload.prototype={destroy:function(){"use strict";for(var e=this._btns.length;e--;)this._btns[e].off&&this._btns[e].off(),n.removeClass(this._btns[e],this._opts.hoverClass),n.removeClass(this._btns[e],this._opts.focusClass),n.removeClass(this._btns[e],this._opts.disabledClass),this._btns[e].disabled=!1;this._killInput(),this._destroy=!0},log:function(t){"use strict";this._opts&&this._opts.debug&&e.console&&e.console.log&&e.console.log("[Uploader] "+t)},setData:function(e){"use strict";this._opts.data=e},setOptions:function(e){"use strict";n.extendObj(this._opts,e)},addButton:function(e){var t;if(e instanceof Array)for(var s=0,i=e.length;s<i;s++)!1!==(t=n.verifyElem(e[s]))?this._btns.push(this.rerouteClicks(t)):this.log("Button with array index "+s+" is invalid");else!1!==(t=n.verifyElem(e))&&this._btns.push(this.rerouteClicks(t))},addDZ:function(e){t&&((e=n.verifyElem(e))?this.addDropZone(e):this.log("Invalid or nonexistent element passed for drop zone"))},setProgressBar:function(e){"use strict";this._progBar=n.verifyElem(e)},setPctBox:function(e){"use strict";this._pctBox=n.verifyElem(e)},setFileSizeBox:function(e){"use strict";this._sizeBox=n.verifyElem(e)},setProgressContainer:function(e){"use strict";this._progBox=n.verifyElem(e)},setAbortBtn:function(e,t){"use strict";this._abortBtn=n.verifyElem(e),this._removeAbort=!1,t&&(this._removeAbort=!0)},setForm:function(t){"use strict";if(this._form=n.verifyElem(t),this._form&&"FORM"==this._form.nodeName.toUpperCase()){var s=this;this._opts.autoSubmit=!1,this._opts.overrideSubmit&&(n.addEvent(this._form,"submit",function(t){t.preventDefault?t.preventDefault():e.event&&(e.event.returnValue=!1),s._validateForm()&&s.submit()}),this._form.submit=function(){s._validateForm()&&s.submit()})}else this.log("Invalid or nonexistent element passed for form")},getQueueSize:function(){"use strict";return this._queue.length},removeCurrent:function(e){"use strict";if(e){for(var t=this._queue.length;t--;)if(this._queue[t].id===e){this._queue.splice(t,1);break}}else this._queue.splice(0,1);this._cycleQueue()},clearQueue:function(){"use strict";this._queue.length=0},disable:function(e){"use strict";var t,s=this._btns.length;for(this._manDisabled=!e||!0===this._manDisabled,this._disabled=!0;s--;)"INPUT"!=(t=this._btns[s].nodeName.toUpperCase())&&"BUTTON"!=t||(this._btns[s].disabled=!0),""!==this._opts.disabledClass&&n.addClass(this._btns[s],this._opts.disabledClass);this._input&&this._input.parentNode&&(this._input.parentNode.style.visibility="hidden")},enable:function(e){"use strict";if(e||(this._manDisabled=!1),!0!==this._manDisabled){var t=this._btns.length;for(this._disabled=!1;t--;)n.removeClass(this._btns[t],this._opts.disabledClass),this._btns[t].disabled=!1}},updatePosition:function(e){"use strict";(e=e||this._btns[0])&&this._input&&this._input.parentNode&&n.copyLayout(e,this._input.parentNode),e=null},rerouteClicks:function(t){"use strict";var s,i,o=this;if(s=n.addEvent(t,"mouseover",function(){o._disabled||(o._input||o._createInput(),o._overBtn=t,n.copyLayout(t,o._input.parentNode),o._input.parentNode.style.visibility="visible")}),i=n.addEvent(t,"click",function(e){e&&e.preventDefault&&e.preventDefault(),o._disabled||(o._input||o._createInput(),o._overBtn=t,c||o._input.click())}),t.off=function(){s(),i()},o._opts.autoCalibrate&&!n.isVisible(t)){o.log("Upload button not visible");e.setTimeout(function s(){n.isVisible(t)?(o.log("Upload button now visible"),e.setTimeout(function(){o.updatePosition(t),1===o._btns.length&&(o._input.parentNode.style.visibility="hidden")},200)):e.setTimeout(s,500)},500)}return t},submit:function(e,t){"use strict";!t&&this._queue.length<1?this._opts.onBlankSubmit.call(this):this._disabled||this._active>=this._opts.maxUploads||this._queue.length<1||this._checkFile(this._queue[0])&&(!1!==this._opts.onSubmit.call(this,this._queue[0].name,this._queue[0].ext,this._queue[0].btn,this._queue[0].size)?(this._active++,(!1===this._opts.multiple||!1===this._opts.queue&&this._active>=this._opts.maxUploads)&&this.disable(!0),this._initUpload(this._queue[0])):this.removeCurrent(this._queue[0].id))}},n.IframeUpload={_detachEvents:{},_detach:function(e){this._detachEvents[e]&&(this._detachEvents[e](),delete this._detachEvents[e])},_getHost:function(e){var t=document.createElement("a");return t.href=e,t.hostname?t.hostname.toLowerCase():e},_addFiles:function(e){var t=n.getFilename(e.value),s=n.getExt(t);return!1!==this._opts.onChange.call(this,t,s,this._overBtn,void 0,e)&&(this._queue.push({id:n.getUID(),file:e,name:t,ext:s,btn:this._overBtn,size:null}),!0)},_uploadIframe:function(t,s,i,o,r,a,u){"use strict";var l,d,c,p=this,h=this._opts,f=n.getUID(),_=n.getIFrame(),m=!1,g=!1;if(d=!0===h.noParams?h.url:h.nginxProgressUrl?d+(d.indexOf("?")>-1?"&":"?")+encodeURIComponent(h.nginxProgressHeader)+"="+encodeURIComponent(f):h.url,l=n.getForm({action:d,target:_.name,method:h.method}),h.onProgress.call(this,0),r&&(r.innerHTML="0%"),o&&(o.style.width="0%"),h.cors){var v=n.getUID();p._detachEvents[v]=n.addEvent(e,"message",function(e){p._getHost(e.origin)==p._getHost(h.url)?(m=!0,p._detach(v),h.endNonXHR.call(p,t.name,t.btn),p._finish(t,"","",e.data,i,s,r,a,u)):p.log("Non-matching origin: "+e.origin)})}p._detachEvents[_.id]=n.addEvent(_,"load",function(){for(var d in p._detach(_.id),h.sessionProgressUrl?l.appendChild(n.getHidden(h.sessionProgressName,f)):h.progressUrl&&l.appendChild(n.getHidden(h.keyParamName,f)),p._form&&n.extendObj(h.data,n.getFormObj(p._form)),h.data)h.data.hasOwnProperty(d)&&l.appendChild(n.getHidden(d,h.data[d]));h.cors&&l.appendChild(n.getHidden(h.corsInputName,e.location.href)),l.appendChild(t.file),p._detachEvents[t.id]=n.addEvent(_,"load",function(){if(_&&_.parentNode&&!g)if(p._detach(t.id),g=!0,delete p._progKeys[f],delete p._sizeFlags[f],a&&n.removeEvent(a,"click",c),h.cors)e.setTimeout(function(){n.remove(_),m||p._errorFinish(t,"","",!1,"error",s,i,r,a,u),h=f=_=i=s=r=a=u=null},600);else{try{var o=(_.contentDocument?_.contentDocument:_.contentWindow.document).body.innerHTML;n.remove(_),_=null,h.endNonXHR.call(p,t.name,t.btn),p._finish(t,"","",o,i,s,r,a,u)}catch(l){p._errorFinish(t,"",l.message,!1,"error",s,i,r,a,u)}h=f=i=s=r=null}}),a&&(c=function(){if(n.removeEvent(a,"click",c),delete p._progKeys[f],delete p._sizeFlags[f],_){g=!0,p._detach(t.id);try{_.contentWindow.document.execCommand&&_.contentWindow.document.execCommand("Stop")}catch(o){}try{_.src="javascript".concat(":false;")}catch(o){}e.setTimeout(function(){n.remove(_),_=null},1)}p.log("Upload aborted"),h.onAbort.call(p,t.name,t.btn,t.size),p._last(i,s,r,a,u,t,"abort")},n.addEvent(a,"click",c)),p.log("Commencing upload using iframe"),l.submit(),e.setTimeout(function(){n.remove(l),l=null,p.removeCurrent(t.id)},1),p._hasProgUrl&&(p._progKeys[f]=1,e.setTimeout(function(){p._getProg(f,o,i,r,1),o=i=r=null},600))}),document.body.appendChild(l),document.body.appendChild(_)},_getProg:function(t,s,i,o,r){"use strict";var a,u,l,d=this,c=this._opts,p=(new Date).getTime();if(t&&c)if(c.nginxProgressUrl?u=c.nginxProgressUrl+"?"+encodeURIComponent(c.nginxProgressHeader)+"="+encodeURIComponent(t)+"&_="+p:c.sessionProgressUrl?u=c.sessionProgressUrl:c.progressUrl&&(u=c.progressUrl+"?progresskey="+encodeURIComponent(t)+"&_="+p),l=function(){var u,p,h,f,_;try{if(l&&(c.cors||4===a.readyState)){l=void 0,a.onreadystatechange=function(){};try{_=a.statusText,f=a.status}catch(m){_="",f=""}if(c.cors||f>=200&&f<300){if(!1===(u=n.parseJSON(a.responseText)))return void d.log("Error parsing progress response (expecting JSON)");if(c.nginxProgressUrl){if("uploading"==u.state)(p=parseInt(u.size,10))>0&&(h=Math.round(parseInt(u.received,10)/p*100),p=Math.round(p/1024));else if("done"==u.state)h=100;else if("error"==u.state)return void d.log("Error requesting upload progress: "+u.status)}else(c.sessionProgressUrl||c.progressUrl)&&!0===u.success&&(p=parseInt(u.size,10),h=parseInt(u.pct,10));if(h&&(o&&(o.innerHTML=h+"%"),s&&(s.style.width=h+"%"),c.onProgress.call(d,h)),p&&!d._sizeFlags[t]&&(i&&(i.innerHTML=p+"K"),d._sizeFlags[t]=1,c.onUpdateFileSize.call(d,p)),!h&&!p&&r>=d._maxFails)return r++,void d.log("Failed progress request limit reached. Count: "+r);h<100&&d._progKeys[t]&&e.setTimeout(function(){d._getProg(t,s,i,o,r),t=s=i=o=r=null},c.checkProgressInterval)}else delete d._progKeys[t],d.log("Error requesting upload progress: "+f+" "+_);a=p=h=f=_=u=null}}catch(m){d.log("Error requesting upload progress: "+m.message)}},c.cors&&!c.sessionProgressUrl){if(!e.XDomainRequest)return;(a=new e.XDomainRequest).open("GET",u,!0),a.onprogress=a.ontimeout=function(){},a.onload=l,a.onerror=function(){delete d._progKeys[t],t=null,d.log("Error requesting upload progress")}}else{var h,f=c.sessionProgressUrl?"POST":"GET",_={};for(var m in(a=n.newXHR()).onreadystatechange=l,a.open(f,u,!0),c.sessionProgressUrl&&(h=encodeURIComponent(c.sessionProgressName)+"="+encodeURIComponent(t),_["Content-Type"]="application/x-www-form-urlencoded"),c.nginxProgressUrl&&(_[c.nginxProgressHeader]=t),_["X-Requested-With"]="XMLHttpRequest",_.Accept="application/json, text/javascript, */*; q=0.01",n.extendObj(_,c.customProgressHeaders),_)_.hasOwnProperty(m)&&(c.encodeHeaders?a.setRequestHeader(m,n.encodeUTF8(_[m]+"")):a.setRequestHeader(m,_[m]+""));a.send(c.sessionProgressUrl&&h||null)}},_initUpload:function(e){if(!1===this._opts.startNonXHR.call(this,e.name,e.btn))return this._disabled&&this.enable(!0),void this._active--;this._hasProgUrl=!!(this._opts.progressUrl||this._opts.sessionProgressUrl||this._opts.nginxProgressUrl),this._uploadIframe(e,this._progBox,this._sizeBox,this._progBar,this._pctBox,this._abortBtn,this._removeAbort),e=this._progBox=this._sizeBox=this._progBar=this._pctBox=this._abortBtn=this._removeAbort=null}},n.XhrUpload={_addFiles:function(e){var t,s,i,o,r=e.length;for(this._opts.multiple||(r=1),o=0;o<r;o++){if(t=n.getFilename(e[o].name),s=n.getExt(t),i=Math.round(e[o].size/1024),!1===this._opts.onChange.call(this,t,s,this._overBtn,i,e[o]))return!1;this._queue.push({id:n.getUID(),file:e[o],name:t,ext:s,btn:this._overBtn,size:i})}return!0},_uploadXhr:function(e,t,s,i,o,r,a,u,l,d){"use strict";var c,p,h=this,f=this._opts,_=n.newXHR();for(var m in o&&(o.innerHTML=e.size+"K"),u&&(u.innerHTML="0%"),r&&(r.style.width="0%"),c=function(t,s){var i;try{if(c&&(s||4===_.readyState))if(c=void 0,_.onreadystatechange=function(){},s)4!==_.readyState&&_.abort(),f.onAbort.call(h,e.name,e.btn,e.size),h._last(o,a,u,l,d,e,"abort");else{l&&n.removeEvent(l,"click",p);try{i=_.statusText}catch(r){i=""}_.status>=200&&_.status<300?(f.endXHR.call(h,e.name,e.size,e.btn),h._finish(e,_.status,i,_.responseText,o,a,u,l,d)):h._errorFinish(e,_.status,i,_.responseText,"error",a,o,u,l,d)}}catch(r){s||h._errorFinish(e,-1,r.message,!1,"error",a,o,u,l,d)}},l&&(p=function(){n.removeEvent(l,"click",p),c&&c(void 0,!0)},n.addEvent(l,"click",p)),_.onreadystatechange=c,_.open(f.method.toUpperCase(),t,!0),_.withCredentials=!!f.withCredentials,n.extendObj(i,f.customHeaders),i)i.hasOwnProperty(m)&&(f.encodeHeaders?_.setRequestHeader(m,n.encodeUTF8(i[m]+"")):_.setRequestHeader(m,i[m]+""));if(n.addEvent(_.upload,"progress",function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);f.onProgress.call(h,t),u&&(u.innerHTML=t+"%"),r&&(r.style.width=t+"%")}}),f.onProgress.call(this,0),!0===f.multipart){var g=new FormData,v=!1;for(var b in s)s.hasOwnProperty(b)&&(b!==f.name||!0!==f.noParams||h._form||(v=!0),g.append(b,s[b]));v||g.append(f.name,e.file),this.log("Commencing upload using multipart form"),_.send(g)}else this.log("Commencing upload using binary stream"),_.send(e.file);this.removeCurrent(e.id)},_initUpload:function(e){"use strict";var t,s={},i={};if(!1===this._opts.startXHR.call(this,e.name,e.size,e.btn))return this._disabled&&this.enable(!0),void this._active--;i["X-Requested-With"]="XMLHttpRequest",i["X-File-Name"]=n.encodeUTF8(e.name),"json"==this._opts.responseType.toLowerCase()&&(i.Accept="application/json, text/javascript, */*; q=0.01"),this._opts.multipart||(i["Content-Type"]="application/octet-stream"),this._form&&n.extendObj(s,n.getFormObj(this._form)),n.extendObj(s,this._opts.data),t=!0===this._opts.noParams?this._opts.url:this._opts.url+(this._opts.url.indexOf("?")>-1?"&":"?")+n.obj2string(s),this._uploadXhr(e,t,s,i,this._sizeBox,this._progBar,this._progBox,this._pctBox,this._abortBtn,this._removeAbort),this._sizeBox=this._progBar=this._progBox=this._pctBox=this._abortBtn=this._removeAbort=null}},n.DragAndDrop={_dragFileCheck:function(e){if(e.dataTransfer.types)for(var t=0;t<e.dataTransfer.types.length;t++)if("Files"==e.dataTransfer.types[t])return!0;return!1},addDropZone:function(e){var t=this,s=[];n.addStyles(e,{zIndex:16777271}),e.ondragenter=function(e){return e.stopPropagation(),e.preventDefault(),!!t._dragFileCheck(e)&&(0===s.length&&n.addClass(this,t._opts.dragClass),-1===n.indexOf(s,e.target)&&s.push(e.target),!1)},e.ondragover=function(e){return e.stopPropagation(),e.preventDefault(),t._dragFileCheck(e)&&(e.dataTransfer.dropEffect="copy"),!1},e.ondragend=function(){return n.removeClass(this,t._opts.dragClass),!1},e.ondragleave=function(e){return n.arrayDelete(s,e.target),0===s.length&&n.removeClass(this,t._opts.dragClass),!1},e.ondrop=function(e){e.stopPropagation(),e.preventDefault(),n.arrayDelete(s,e.target),0===s.length&&n.removeClass(this,t._opts.dragClass),t._dragFileCheck(e)&&!1!==t._addFiles(e.dataTransfer.files)&&t._cycleQueue()}}},n.extendObj(n.SimpleUpload.prototype,{_createInput:function(){"use strict";var e=this,s=document.createElement("div");this._input=document.createElement("input"),this._input.type="file",this._input.name=this._opts.name,t&&!d&&this._opts.multipleSelect&&(this._input.multiple=!0),"accept"in this._input&&""!==this._opts.accept&&(this._input.accept=this._opts.accept),n.addStyles(s,{display:"block",position:"absolute",overflow:"hidden",margin:0,padding:0,opacity:0,direction:"ltr",zIndex:16777270,pointerEvents:"none"}),"0"!==s.style.opacity&&(s.style.filter="alpha(opacity=0)"),n.addStyles(this._input,{position:"absolute",right:0,margin:0,padding:0,fontSize:"480px",fontFamily:"sans-serif",cursor:"pointer",height:"100%",zIndex:16777270}),this._input.turnOff=n.addEvent(this._input,"change",function(){e._input&&""!==e._input.value&&!1!==e._addFiles(t?e._input.files:e._input)&&(n.removeClass(e._overBtn,e._opts.hoverClass),n.removeClass(e._overBtn,e._opts.focusClass),e._killInput(),e._createInput(),e._opts.autoSubmit&&e.submit())}),""!==e._opts.hoverClass&&(s.mouseOverOff=n.addEvent(s,"mouseover",function(){n.addClass(e._overBtn,e._opts.hoverClass)})),s.mouseOutOff=n.addEvent(s,"mouseout",function(){e._input.parentNode.style.visibility="hidden",""!==e._opts.hoverClass&&(n.removeClass(e._overBtn,e._opts.hoverClass),n.removeClass(e._overBtn,e._opts.focusClass))}),""!==e._opts.focusClass&&(this._input.focusOff=n.addEvent(this._input,"focus",function(){n.addClass(e._overBtn,e._opts.focusClass)}),this._input.blurOff=n.addEvent(this._input,"blur",function(){n.removeClass(e._overBtn,e._opts.focusClass)})),s.appendChild(this._input),document.body.appendChild(s),s=null},_last:function(e,t,s,i,o,r,a,u,l){"use strict";if(e&&(e.innerHTML=""),s&&(s.innerHTML=""),i&&o&&n.remove(i),t&&n.remove(t),this._active--,e=t=s=i=o=null,this._disabled&&this.enable(!0),this._destroy&&0===this._queue.length&&0===this._active)for(var d in this)this.hasOwnProperty(d)&&delete this[d];else this._opts.onDone.call(this,r.name,u,a,l,r.btn,r.size),this._cycleQueue(),0===this._queue.length&&0===this._active&&this._opts.onAllDone.call(this);r=a=u=l=null},_errorFinish:function(e,t,s,n,i,o,r,a,u,l){"use strict";this.log("Upload failed: "+t+" "+s),this._opts.onError.call(this,e.name,i,t,s,n,e.btn,e.size),this._last(r,o,a,u,l,e,"error",t,n),s=i=r=o=a=u=l=null},_finish:function(e,t,s,i,o,r,a,u,l){"use strict";this.log("Server response: "+i),"json"!=this._opts.responseType.toLowerCase()||!1!==(i=n.parseJSON(i))?(this._opts.onComplete.call(this,e.name,i,e.btn,e.size),this._last(o,r,a,u,l,e,"success",t,i),s=o=r=a=u=l=null):this._errorFinish(e,t,s,!1,"parseerror",r,o,u,l)},_checkFile:function(e){"use strict";var t=!1,s=this._opts.allowedExtensions.length;if(s>0){for(;s--;)if(this._opts.allowedExtensions[s].toLowerCase()==e.ext.toLowerCase()){t=!0;break}if(!t)return this.removeCurrent(e.id),this.log("File extension not permitted"),this._opts.onExtError.call(this,e.name,e.ext),!1}return e.size&&!1!==this._opts.maxSize&&e.size>this._opts.maxSize?(this.removeCurrent(e.id),this.log(e.name+" exceeds "+this._opts.maxSize+"K limit"),this._opts.onSizeError.call(this,e.name,e.size,e.btn),!1):(e=null,!0)},_killInput:function(){"use strict";this._input&&(this._input.turnOff&&this._input.turnOff(),this._input.focusOff&&this._input.focusOff(),this._input.blurOff&&this._input.blurOff(),this._input.parentNode.mouseOverOff&&this._input.parentNode.mouseOverOff(),n.remove(this._input.parentNode),delete this._input,this._input=null)},_cycleQueue:function(){"use strict";this._queue.length>0&&this._opts.autoSubmit&&this.submit(void 0,!0)},_validateForm:function(){"use strict";return!(this._form.checkValidity&&!this._form.checkValidity())}}),t?n.extendObj(n.SimpleUpload.prototype,n.XhrUpload):n.extendObj(n.SimpleUpload.prototype,n.IframeUpload),n.extendObj(n.SimpleUpload.prototype,n.DragAndDrop),n});
},{}],"yGCn":[function(require,module,exports) {
function t(t){return t%4==0&&t%100!=0||t%400==0}function e(e){if("string"==typeof e){var i=e.indexOf(".");i>0&&i<=6&&(e=e.replace(/\./g,"-"))}var r=new Date(e),n=r.getFullYear(),a=r.getMonth(),u=r.getDate(),s=[31,t(n)?29:28,31,30,31,30,31,31,30,31,30,31];return!(n<1e3)&&(!isNaN(a)&&(!(a+1>12)&&(!isNaN(u)&&!(u>s[a]))))}var i,r={required:function(t){return null!=t&&String(t).replace(/\s/g,"").length>0},required_if:function(t,e,i){return e=this.getParameters(),this.validator._objectPath(this.validator.input,e[0])!==e[1]||this.validator.getRule("required").validate(t)},required_unless:function(t,e,i){return e=this.getParameters(),this.validator._objectPath(this.validator.input,e[0])===e[1]||this.validator.getRule("required").validate(t)},required_with:function(t,e,i){return!this.validator._objectPath(this.validator.input,e)||this.validator.getRule("required").validate(t)},required_with_all:function(t,e,i){e=this.getParameters();for(var r=0;r<e.length;r++)if(!this.validator._objectPath(this.validator.input,e[r]))return!0;return this.validator.getRule("required").validate(t)},required_without:function(t,e,i){return!!this.validator._objectPath(this.validator.input,e)||this.validator.getRule("required").validate(t)},required_without_all:function(t,e,i){e=this.getParameters();for(var r=0;r<e.length;r++)if(this.validator._objectPath(this.validator.input,e[r]))return!0;return this.validator.getRule("required").validate(t)},boolean:function(t){return!0===t||!1===t||0===t||1===t||"0"===t||"1"===t||"true"===t||"false"===t},size:function(t,e,i){return!t||(e=parseFloat(e),this.getSize()===e)},string:function(t,e,i){return"string"==typeof t},sometimes:function(t){return!0},min:function(t,e,i){return this.getSize()>=e},max:function(t,e,i){return this.getSize()<=e},between:function(t,e,i){e=this.getParameters();var r=this.getSize(),n=parseFloat(e[0],10),a=parseFloat(e[1],10);return r>=n&&r<=a},email:function(t){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)},numeric:function(t){var e;return"number"==typeof(e=Number(t))&&!isNaN(e)&&"boolean"!=typeof t},array:function(t){return t instanceof Array},url:function(t){return/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/i.test(t)},alpha:function(t){return/^[a-zA-Z]+$/.test(t)},alpha_dash:function(t){return/^[a-zA-Z0-9_\-]+$/.test(t)},alpha_num:function(t){return/^[a-zA-Z0-9]+$/.test(t)},same:function(t,e){return this.validator._flattenObject(this.validator.input)[e]===t},different:function(t,e){return this.validator._flattenObject(this.validator.input)[e]!==t},in:function(t,e){var i,r;if(t&&(i=this.getParameters()),t&&!(t instanceof Array)){var n=t;for(r=0;r<i.length;r++)if("string"==typeof i[r]&&(n=String(t)),n===i[r])return!0;return!1}if(t&&t instanceof Array)for(r=0;r<t.length;r++)if(i.indexOf(t[r])<0)return!1;return!0},not_in:function(t,e){for(var i=this.getParameters(),r=i.length,n=!0,a=0;a<r;a++){var u=t;if("string"==typeof i[a]&&(u=String(t)),u===i[a]){n=!1;break}}return n},accepted:function(t){return"on"===t||"yes"===t||1===t||"1"===t||!0===t},confirmed:function(t,e,i){var r=i+"_confirmation";return this.validator.input[r]===t},integer:function(t){return String(parseInt(t,10))===String(t)},digits:function(t,e){return!(!this.validator.getRule("numeric").validate(t)||String(t).length!==parseInt(e))},regex:function(t,e){var i=/[g|i|m]{1,3}$/,r=e.match(i);return r=r?r[0]:"",e=e.replace(i,"").slice(1,-1),!!(e=new RegExp(e,r)).test(t)},date:function(t,i){return e(t)},present:function(t){return void 0!==t},after:function(t,i){var r=this.validator.input[i],n=t;return!!e(r)&&(!!e(n)&&new Date(r).getTime()<new Date(n).getTime())},after_or_equal:function(t,i){var r=this.validator.input[i],n=t;return!!e(r)&&(!!e(n)&&new Date(r).getTime()<=new Date(n).getTime())},before:function(t,i){var r=this.validator.input[i],n=t;return!!e(r)&&(!!e(n)&&new Date(r).getTime()>new Date(n).getTime())},before_or_equal:function(t,i){var r=this.validator.input[i],n=t;return!!e(r)&&(!!e(n)&&new Date(r).getTime()>=new Date(n).getTime())},hex:function(t){return/^[0-9a-f]+$/i.test(t)}},n=function(){throw new Error("Validator `"+this.name+"` is not defined!")};function a(t,e,i){this.name=t,this.fn=e,this.passes=null,this._customMessage=void 0,this.async=i}a.prototype={validate:function(t,e,i,r){var n=this;if(this._setValidatingData(i,t,e),"function"==typeof r){this.callback=r;var a=function(t,e){n.response(t,e)};return this.async?this._apply(t,e,i,a):a(this._apply(t,e,i))}return this._apply(t,e,i)},_apply:function(t,e,i,r){return(this.isMissed()?n:this.fn).apply(this,[t,e,i,r])},_setValidatingData:function(t,e,i){this.attribute=t,this.inputValue=e,this.ruleValue=i},getParameters:function(){var t=[];return"string"==typeof this.ruleValue&&(t=this.ruleValue.split(",")),"number"==typeof this.ruleValue&&t.push(this.ruleValue),this.ruleValue instanceof Array&&(t=this.ruleValue),t},getSize:function(){var t=this.inputValue;return t instanceof Array?t.length:"number"==typeof t?t:this.validator._hasNumericRule(this.attribute)?parseFloat(t,10):t.length},_getValueType:function(){return"number"==typeof this.inputValue||this.validator._hasNumericRule(this.attribute)?"numeric":"string"},response:function(t,e){this.passes=void 0===t||!0===t,this._customMessage=e,this.callback(this.passes,e)},setValidator:function(t){this.validator=t},isMissed:function(){return"function"!=typeof this.fn},get customMessage(){return this.isMissed()?i:this._customMessage}};var u={asyncRules:[],implicitRules:["required","required_if","required_unless","required_with","required_with_all","required_without","required_without_all","accepted","present"],make:function(t,e){var i=this.isAsync(t),n=new a(t,r[t],i);return n.setValidator(e),n},isAsync:function(t){for(var e=0,i=this.asyncRules.length;e<i;e++)if(this.asyncRules[e]===t)return!0;return!1},isImplicit:function(t){return this.implicitRules.indexOf(t)>-1},register:function(t,e){r[t]=e},registerImplicit:function(t,e){this.register(t,e),this.implicitRules.push(t)},registerAsync:function(t,e){this.register(t,e),this.asyncRules.push(t)},registerAsyncImplicit:function(t,e){this.registerImplicit(t,e),this.asyncRules.push(t)},registerMissedRuleValidator:function(t,e){n=t,i=e}};module.exports=u;
},{}],"Jo94":[function(require,module,exports) {
var e={between:function(e,t){var r=t.getParameters();return this._replacePlaceholders(t,e,{min:r[0],max:r[1]})},required_if:function(e,t){var r=t.getParameters();return this._replacePlaceholders(t,e,{other:this._getAttributeName(r[0]),value:r[1]})},required_unless:function(e,t){var r=t.getParameters();return this._replacePlaceholders(t,e,{other:this._getAttributeName(r[0]),value:r[1]})},required_with:function(e,t){var r=t.getParameters();return this._replacePlaceholders(t,e,{field:this._getAttributeName(r[0])})},required_with_all:function(e,t){var r=t.getParameters(),a=this._getAttributeName.bind(this);return this._replacePlaceholders(t,e,{fields:r.map(a).join(", ")})},required_without:function(e,t){var r=t.getParameters();return this._replacePlaceholders(t,e,{field:this._getAttributeName(r[0])})},required_without_all:function(e,t){var r=t.getParameters(),a=this._getAttributeName.bind(this);return this._replacePlaceholders(t,e,{fields:r.map(a).join(", ")})},after:function(e,t){var r=t.getParameters();return this._replacePlaceholders(t,e,{after:this._getAttributeName(r[0])})},before:function(e,t){var r=t.getParameters();return this._replacePlaceholders(t,e,{before:this._getAttributeName(r[0])})},after_or_equal:function(e,t){var r=t.getParameters();return this._replacePlaceholders(t,e,{after_or_equal:this._getAttributeName(r[0])})},before_or_equal:function(e,t){var r=t.getParameters();return this._replacePlaceholders(t,e,{before_or_equal:this._getAttributeName(r[0])})},same:function(e,t){var r=t.getParameters();return this._replacePlaceholders(t,e,{same:this._getAttributeName(r[0])})}};function t(e){return e.replace(/[_\[]/g," ").replace(/]/g,"")}module.exports={replacements:e,formatter:t};
},{}],"fc3z":[function(require,module,exports) {
var t=require("./attributes"),e=function(t,e){this.lang=t,this.messages=e,this.customMessages={},this.attributeNames={}};e.prototype={constructor:e,_setCustom:function(t){this.customMessages=t||{}},_setAttributeNames:function(t){this.attributeNames=t},_setAttributeFormatter:function(t){this.attributeFormatter=t},_getAttributeName:function(t){var e=t;return this.attributeNames.hasOwnProperty(t)?this.attributeNames[t]:(this.messages.attributes.hasOwnProperty(t)&&(e=this.messages.attributes[t]),this.attributeFormatter&&(e=this.attributeFormatter(e)),e)},all:function(){return this.messages},render:function(e){if(e.customMessage)return e.customMessage;var s=this._getTemplate(e);return t.replacements[e.name]?t.replacements[e.name].apply(this,[s,e]):this._replacePlaceholders(e,s,{})},_getTemplate:function(t){for(var e,s=this.messages,r=s.def,a=this.customMessages,i=[t.name+"."+t.attribute,t.name],n=0;n<i.length;n++){if(e=i[n],a.hasOwnProperty(e)){r=a[e];break}if(s.hasOwnProperty(e)){r=s[e];break}}return"object"==typeof r&&(r=r[t._getValueType()]),r},_replacePlaceholders:function(t,e,s){var r,a;if(s.attribute=this._getAttributeName(t.attribute),s[t.name]=s[t.name]||t.getParameters().join(","),"string"==typeof e&&"object"==typeof s)for(a in r=e,s)r=r.replace(new RegExp(":"+a,"g"),s[a]);return r}},module.exports=e;
},{"./attributes":"Jo94"}],"tqZb":[function(require,module,exports) {
module.exports={accepted:"The :attribute must be accepted.",after:"The :attribute must be after :after.",after_or_equal:"The :attribute must be equal or after :after_or_equal.",alpha:"The :attribute field must contain only alphabetic characters.",alpha_dash:"The :attribute field may only contain alpha-numeric characters, as well as dashes and underscores.",alpha_num:"The :attribute field must be alphanumeric.",before:"The :attribute must be before :before.",before_or_equal:"The :attribute must be equal or before :before_or_equal.",between:"The :attribute field must be between :min and :max.",confirmed:"The :attribute confirmation does not match.",email:"The :attribute format is invalid.",date:"The :attribute is not a valid date format.",def:"The :attribute attribute has errors.",digits:"The :attribute must be :digits digits.",different:"The :attribute and :different must be different.",in:"The selected :attribute is invalid.",integer:"The :attribute must be an integer.",hex:"The :attribute field should have hexadecimal format",min:{numeric:"The :attribute must be at least :min.",string:"The :attribute must be at least :min characters."},max:{numeric:"The :attribute may not be greater than :max.",string:"The :attribute may not be greater than :max characters."},not_in:"The selected :attribute is invalid.",numeric:"The :attribute must be a number.",present:"The :attribute field must be present (but can be empty).",required:"The :attribute field is required.",required_if:"The :attribute field is required when :other is :value.",required_unless:"The :attribute field is required when :other is not :value.",required_with:"The :attribute field is required when :field is not empty.",required_with_all:"The :attribute field is required when :fields are not empty.",required_without:"The :attribute field is required when :field is empty.",required_without_all:"The :attribute field is required when :fields are empty.",same:"The :attribute and :same fields must match.",size:{numeric:"The :attribute must be :size.",string:"The :attribute must be :size characters."},string:"The :attribute must be a string.",url:"The :attribute format is invalid.",regex:"The :attribute format is invalid.",attributes:{}};
},{}],"TMPU":[function(require,module,exports) {
var s=require("./messages");require("./lang/en");var e=require,t={messages:{},_set:function(s,e){this.messages[s]=e},_setRuleMessage:function(s,e,t){this._load(s),void 0===t&&(t=this.messages[s].def),this.messages[s][e]=t},_load:function(s){if(!this.messages[s])try{var t=e("./lang/"+s);this._set(s,t)}catch(a){}},_get:function(s){return this._load(s),this.messages[s]},_make:function(e){return this._load(e),new s(e,this.messages[e])}};module.exports=t;
},{"./messages":"fc3z","./lang/en":"tqZb"}],"MZ6F":[function(require,module,exports) {
var r=function(){this.errors={}};r.prototype={constructor:r,add:function(r,t){this.has(r)||(this.errors[r]=[]),-1===this.errors[r].indexOf(t)&&this.errors[r].push(t)},get:function(r){return this.has(r)?this.errors[r]:[]},first:function(r){return!!this.has(r)&&this.errors[r][0]},all:function(){return this.errors},has:function(r){return!!this.errors.hasOwnProperty(r)}},module.exports=r;
},{}],"yDzK":[function(require,module,exports) {
function s(s,e){this.onResolvedAll=e,this.onFailedOne=s,this.resolvers={},this.resolversCount=0,this.passed=[],this.failed=[],this.firing=!1}s.prototype={add:function(s){var e=this.resolversCount;return this.resolvers[e]=s,this.resolversCount++,e},resolve:function(s){var e=this.resolvers[s];!0===e.passes?this.passed.push(e):!1===e.passes&&(this.failed.push(e),this.onFailedOne(e)),this.fire()},isAllResolved:function(){return this.passed.length+this.failed.length===this.resolversCount},fire:function(){this.firing&&this.isAllResolved()&&this.onResolvedAll(0===this.failed.length)},enableFiring:function(){this.firing=!0}},module.exports=s;
},{}],"2SNZ":[function(require,module,exports) {
var t=require("./rules"),e=require("./lang"),r=require("./errors"),s=require("./attributes"),i=require("./async"),n=function(t,s,i){var a=n.getDefaultLang();this.input=t||{},this.messages=e._make(a),this.messages._setCustom(i),this.setAttributeFormatter(n.prototype.attributeFormatter),this.errors=new r,this.errorCount=0,this.hasAsync=!1,this.rules=this._parseRules(s)};n.prototype={constructor:n,lang:"en",numericRules:["integer","numeric"],attributeFormatter:s.formatter,check:function(){for(var t in this.rules){var e=this.rules[t],r=this._objectPath(this.input,t);if(!this._hasRule(t,["sometimes"])||this._suppliedWithData(t))for(var s,i,n,a=0,u=e.length;a<u&&(i=e[a],s=this.getRule(i.name),!this._isValidatable(s,r)||((n=s.validate(r,i.value,t))||this._addFailure(s),!this._shouldStopValidating(t,n)));a++);}return 0===this.errorCount},checkAsync:function(t,e){var r=this;t=t||function(){},e=e||function(){};var s=new i(function(t,e){r._addFailure(t,e)},function(r){r?t():e()}),n=function(t,e,r,i){return function(){var n=s.add(i);i.validate(t,e.value,r,function(){s.resolve(n)})}};for(var a in this.rules){var u=this.rules[a],o=this._objectPath(this.input,a);if(!this._hasRule(a,["sometimes"])||this._suppliedWithData(a))for(var c,l,h=0,f=u.length;h<f;h++)l=u[h],c=this.getRule(l.name),this._isValidatable(c,o)&&n(o,l,a,c)()}s.enableFiring(),s.fire()},_addFailure:function(t){var e=this.messages.render(t);this.errors.add(t.attribute,e),this.errorCount++},_flattenObject:function(t){var e={};return t&&function t(r,s){if(s||0!==Object.getOwnPropertyNames(r).length)if(Object(r)!==r||Array.isArray(r))e[s]=r;else{var i=!0;for(var n in r)i=!1,t(r[n],s?s+"."+n:n);i&&(e[s]={})}}(t),e},_objectPath:function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];var r=e.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split("."),s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i]);for(var n=0,a=r.length;n<a;n++){if(!Object.hasOwnProperty.call(s,r[n]))return;s=s[r[n]]}return s},_parseRules:function(t){var e={};for(var r in t=this._flattenObject(t)){var s=t[r];this._parseRulesCheck(r,s,e)}return e},_parseRulesCheck:function(t,e,r,s){t.indexOf("*")>-1?this._parsedRulesRecurse(t,e,r,s):this._parseRulesDefault(t,e,r,s)},_parsedRulesRecurse:function(t,e,r,s){var i=t.substr(0,t.indexOf("*")-1),n=this._objectPath(this.input,i);if(n)for(var a=0;a<n.length;a++){var u=s?s.slice():[];u.push(a),this._parseRulesCheck(t.replace("*",a),e,r,u)}},_parseRulesDefault:function(e,r,s,i){var n=[];r instanceof Array&&(r=this._prepareRulesArray(r)),"string"==typeof r&&(r=r.split("|"));for(var a,u=0,o=r.length;u<o;u++)(a="string"==typeof r[u]?this._extractRuleAndRuleValue(r[u]):r[u]).value&&(a.value=this._replaceWildCards(a.value,i),this._replaceWildCardsMessages(i)),t.isAsync(a.name)&&(this.hasAsync=!0),n.push(a);s[e]=n},_replaceWildCards:function(t,e){if(!e)return t;var r=t;return e.forEach(function(t){if(Array.isArray(r)&&(r=r[0]),pos=r.indexOf("*"),-1===pos)return r;r=r.substr(0,pos)+t+r.substr(pos+1)}),Array.isArray(t)&&(t[0]=r,r=t),r},_replaceWildCardsMessages:function(t){var e=this.messages.customMessages,r=this;Object.keys(e).forEach(function(s){if(t){var i=r._replaceWildCards(s,t);e[i]=e[s]}}),this.messages._setCustom(e)},_prepareRulesArray:function(t){for(var e=[],r=0,s=t.length;r<s;r++)if("object"==typeof t[r])for(var i in t[r])e.push({name:i,value:t[r][i]});else e.push(t[r]);return e},_suppliedWithData:function(t){return this.input.hasOwnProperty(t)},_extractRuleAndRuleValue:function(t){var e,r={};return r.name=t,t.indexOf(":")>=0&&(e=t.split(":"),r.name=e[0],r.value=e.slice(1).join(":")),r},_hasRule:function(t,e){for(var r=this.rules[t]||[],s=0,i=r.length;s<i;s++)if(e.indexOf(r[s].name)>-1)return!0;return!1},_hasNumericRule:function(t){return this._hasRule(t,this.numericRules)},_isValidatable:function(e,r){return!!t.isImplicit(e.name)||this.getRule("required").validate(r)},_shouldStopValidating:function(t,e){var r=this.stopOnAttributes;return void 0!==r&&!1!==r&&!0!==e&&(!(r instanceof Array)||r.indexOf(t)>-1)},setAttributeNames:function(t){this.messages._setAttributeNames(t)},setAttributeFormatter:function(t){this.messages._setAttributeFormatter(t)},getRule:function(e){return t.make(e,this)},stopOnError:function(t){this.stopOnAttributes=t},passes:function(t){return this._checkAsync("passes",t)?this.checkAsync(t):this.check()},fails:function(t){return this._checkAsync("fails",t)?this.checkAsync(function(){},t):!this.check()},_checkAsync:function(t,e){var r="function"==typeof e;if(this.hasAsync&&!r)throw t+" expects a callback when async rules are being tested.";return this.hasAsync||r}},n.setMessages=function(t,r){return e._set(t,r),this},n.getMessages=function(t){return e._get(t)},n.useLang=function(t){this.prototype.lang=t},n.getDefaultLang=function(){return this.prototype.lang},n.setAttributeFormatter=function(t){this.prototype.attributeFormatter=t},n.stopOnError=function(t){this.prototype.stopOnAttributes=t},n.register=function(r,s,i){var a=n.getDefaultLang();t.register(r,s),e._setRuleMessage(a,r,i)},n.registerImplicit=function(r,s,i){var a=n.getDefaultLang();t.registerImplicit(r,s),e._setRuleMessage(a,r,i)},n.registerAsync=function(r,s,i){var a=n.getDefaultLang();t.registerAsync(r,s),e._setRuleMessage(a,r,i)},n.registerAsyncImplicit=function(r,s,i){var a=n.getDefaultLang();t.registerAsyncImplicit(r,s),e._setRuleMessage(a,r,i)},n.registerMissedRuleValidator=function(e,r){t.registerMissedRuleValidator(e,r)},module.exports=n;
},{"./rules":"yGCn","./lang":"TMPU","./errors":"MZ6F","./attributes":"Jo94","./async":"yDzK"}],"Xh/X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../vendor/simple-ajax-uploader")),r=require("./utils/styling"),t=require("./utils/squarespace"),a=i(require("validatorjs")),l=i(require("lodash/get"));function i(e){return e&&e.__esModule?e:{default:e}}function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function s(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,r,t){return r&&o(e.prototype,r),t&&o(e,t),e}var d="".concat("https://secret-fortress-29641.herokuapp.com","/v2/upload"),u=function(){function i(e){s(this,i),(0,r.injectStyleSheet)(),this.hasShownError=!1,this.requirements={field:"Label name",message:"Please enter your label name before uploading your collection."},this.fileInput=e,this.buildUploader=this.buildUploader.bind(this),this.handleValidation=this.handleValidation.bind(this),this.resetErrorStyles=this.resetErrorStyles.bind(this),this.currentUploader=this.buildUploader(e),this.folderName="",this.pagePath=(0,l.default)(window,"top.location.pathname").replace(/^\//,""),this.folderBaseName="".concat(t.USER_ID,"/").concat(this.pagePath),console.log("CONSTRUCTOR")}return c(i,[{key:"resetErrorStyles",value:function(e){var r=e.inputNode,t=e.parentNode,a=e.hasAddedParentClass,l=r.className;if(r.className=l.replace(" field-validation-error",""),a){var i=t.className;t.className=i.replace(" field-validation-error-message","")}}},{key:"handleValidation",value:function(e){var r=this,t=this.requirements,l=Array.prototype.slice.call(document.querySelectorAll("form label")),i={},n={},s={};console.warn("REQUIREMENTS: ",t),l.forEach(function(e){var a=e.innerHTML.replace(/\<.*\>/,"").trim().toLowerCase();if(console.warn("LABEL: ",e,a),a===t.field.toLowerCase()){var l=e.getAttribute("for"),o="#".concat(l),c=!!l&&document.querySelector(o),d=a.replace(/\s/g,"_");c&&(i[d]=c.value,r.folderName=c.value,n[d]="required",s[d]={forAttribute:l,inputId:o,inputField:c})}});var o=new a.default(i,n);if(!o.passes()){var c=o.errors.all(),d=null;return Object.keys(c).forEach(function(e){var t=s[e].inputField.parentNode,a=s[e].inputField,l=!1;d=a.form,t.className.includes("field-validation-error-message")||"DIV"!==t.tagName||(l=!0,t.setAttribute("data-error-message",c[e]),t.className+=" field-validation-error-message"),a.className.includes("field-validation-error")||"INPUT"!==a.tagName||(a.addEventListener("change",function(){return r.resetErrorStyles({inputNode:a,parentNode:t,hasAddedParentClass:l})}),a.className+=" field-validation-error")}),e.stopPropagation(),e.preventDefault(),void(d&&d&&d.scrollIntoView&&d.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}))}}},{key:"buildUploader",value:function(){var r=this,a=this.fileInput,l=new Error;if(!a.className.includes("sqsf-uploader")){var i=a.querySelector(".field-element");if(i){var s=i.getAttribute("placeholder"),o=s&&s.replace(/\s/g,"").split(",")||[".jpg",".jpeg",".png",".gif",".txt"],c=a.querySelector(".description"),u=c&&c.textContent.replace(/\s/g,""),p=a.getAttribute("id");if(a.querySelector(".description")&&(a.querySelector(".description").style.display="none"),i&&(i.style.display="none"),i&&"TEXTAREA"!==i.tagName){i.style.display="none";var f=document.createElement("textarea");f.id=i.id,f.style.display="none",f.className=i.className,f.value=i.value.replace(/   /g,"   \n"),a.removeChild(i),a.appendChild(f)}var m=u.replace(/\s/g,"").split(";").reduce(function(e,r){var t=r.split("=");return Object.assign({},e,n({},t[0],t[1]&&t[1].replace(/_/g," ")||!0))},{Multiple:!1,MaxSize:10480,ButtonLabel:"Add_Your_Files",RequiredField:"Label_Name",RequiredFieldMessage:"Enter_the_name_of_your_Label_before_uploading_your_Collection."}),v=m.ButtonLabel,h=m.Multiple,g=m.MaxSize,y=m.RequiredField,b=m.RequiredFieldMessage;this.requirements={field:y.replace(/_/g," "),message:b.replace(/_/g," ")};var S=a.querySelector(".fileInput");if(S){for(;S.firstChild;)S.removeChild(S.firstChild);a.removeChild(S)}var q=document.createElement("div");q.innerHTML='<div style="margin-right: 15px;" class="uploadButton button sqs-system-button sqs-editable-button">\n            '.concat(v,'\n            </div>\n            <div class="progressBox"></div>\n            <div class="messageBox"></div>'),q.className="fileInput field-element clear",a.appendChild(q);var N=document.createElement("div");N.className="field-error";var E=a.querySelectorAll(".messageBox")[0],C=new Proxy({folder:null},{get:function(e,t){return"folder"===t?"".concat(r.folderBaseName,"/").concat(r.folderName||"default"):Reflect.get(e,t)}});if(a.className=a.className+" sqsf-uploader",i.value){var x=i.value.split("   \n").length,w=x>1?"s":"",_=document.createElement("div");_.className="upload-success",_.innerHTML='<div class="name" style="margin:10px 10px 10px 0;color: green;">'+x+" <span>file"+w+" already added.</span></div>",E.appendChild(_)}var B=new e.default.SimpleUpload({customHeaders:{"User-Id":t.USER_ID},id:p,accept:o.toString(),multipart:!0,multiple:h,multipleSelect:h,button:a.querySelector(".uploadButton"),dropzone:a.querySelector(".uploadButton"),url:d,name:"file",data:C,sessionProgressUrl:null,responseType:"json",allowedExtensions:o.map(function(e){return e.replace(/\./g,"").replace(/\s/g,"")}),maxSize:+g,hoverClass:"ui-state-hover",focusClass:"ui-state-focus",disabledClass:"ui-state-disabled",onChange:function(){a.querySelector(".field-error")&&a.removeChild(a.querySelector(".field-error"))},onExtError:function(e,r){var t="Your file ".concat(e," is ").concat(r," type. We accept only these files ").concat(o);N.innerHTML=t,a.insertBefore(N,a.querySelector(".title"))},onSizeError:function(e,r){"Your file ".concat(e," is to large! You need to compress the image or resize it, so it's smaller.");a.insertBefore(N,a.querySelector(".title"))},onBlankSubmit:function(e){console.warn("EMPTY SUBMIT: ",e)},onSubmit:function(e,r,t,l){a.querySelector(".field-error")&&a.removeChild(a.querySelector(".field-error"));var i=document.createElement("div");i.className="progress",i.style="width:100%; height: 4px; margin: 5px 0;";var n=document.createElement("div");n.className="progress-bar",n.style="background: #a5a5a5; height: 100%; transition: width 1s 0.1s ease;",i.appendChild(n);var s=document.createElement("div");(s.className="wrapper",s.innerHTML='<div class="name" style="margin:10px 10px 10px 0">'+e+" <span> - "+l+"KB</span></div>",s.appendChild(i),a.querySelector(".progressBox").appendChild(s),h)||Array.prototype.slice.call(a.querySelectorAll(".wrapper")).forEach(function(e){e.parentNode.removeChild(e)});this&&this.setProgressBar&&this.setProgressBar(n),this&&this.setProgressContainer&&this.setProgressContainer(s)},onComplete:function(e,r){if(!r)return N.textContent="".concat(e," upload failed"),void a.insertBefore(N,a.querySelector(".title"));if(r.success&&r.urls.length){var t=r.urls.reduce(function(e,r){return"".concat(e,"\n").concat(r)},"");i.value="".concat(i.value).concat(t);var l=document.createElement("div");l.className="upload-success",l.innerHTML='<div class="name" style="margin:10px 10px 10px 0;color: green;">'.concat(e,"</div>"),E.appendChild(l)}}});return document.querySelector("input[type=file][name=file]").addEventListener("click",this.handleValidation),console.warn("UPLOADER: ",B),B}l.message="Invalid Text Input Field"}else l.message="Invalid File Input Field"}}]),i}(),p=u;exports.default=p;
},{"../vendor/simple-ajax-uploader":"cl7N","./utils/styling":"lrIo","./utils/squarespace":"aQIw","validatorjs":"2SNZ","lodash/get":"5U5Y"}]},{},[], null)
//# sourceMappingURL=/form-uploader.75e09f99.js.map